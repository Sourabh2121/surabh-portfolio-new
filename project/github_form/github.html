<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sign Up</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Mona+Sans&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono|Menlo|Monaco|Consolas|Liberation+Mono|Courier+New|monospace&display=swap">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="css/style.css">
  <style>
   
  </style>

</head>
<body>
  <section class="section-sign-up">
    <div class="signup-space d-none">
      <div class="signup-stars"></div>
      <div class="signup-stars"></div>
      <div class="signup-stars"></div>
      <div class="signup-stars"></div>
      <div class="signup-stars"></div>
      <div class="signup-stars"></div>
    </div>
    <div class="position-relative">
      <div class="stars"></div>
    </div>
    <div class="">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-8 col-lg-6">
            <div class="sign-box rounded-2 p-4 m-lg-4 ">
              <div class="sign-text-form">               
                <div>
                  <span id="typed" style="white-space:pre;" class="typed"></span>
                </div>
                <form action="" class="pt-4">
                  <div class="py-2 d-none email-div">
                    <label for="" class="label-color">Enter your email*</label>
                    <div class="d-flex align-items-center gap-2 my-2">
                      <div class="d-flex align-items-center gap-2 w-75">
                        <span><i class='bx bx-right-arrow-alt' id="arrow_change"></i></span>
                        <input id="email" class="signup-input py-1 w-100"  autofocus="autofocus" autocomplete="off" data-target="text-suggester.input" aria-describedby="email-err" type="email" name="user[email]" spellcheck="false">
                      </div>
                      <div class="w-25">
                        <button type="button" id="ctnbtn"  class="continue-btn next-btn form-control px-3 mt-4 mt-sm-0">
                          Continue
                        </button>
                      </div>
                    </div>
                  </div>

                  <div class="py-2 pass-div d-none">
                    <label for="" class="label-color">Create a password*</label>
                    <div class="d-flex align-items-center gap-2 my-2">
                      <div class="d-flex align-items-center gap-2 w-75">
                        <span><i class='bx bx-right-arrow-alt' id="pass_change"></i></span>
                        <div class="position-relative w-100">
                          <input type="password" id="password" placeholder="" class="py-1 signup-input w-100">
                          <span class="toggle-password bx bx-low-vision position-absolute show-pass text-light"></span>
                        </div>
                      </div>
                      <div class="w-25">
                        <button type="button"  id="passbtn" class="continue-btn next-btn form-control px-3 mt-4 mt-sm-0" data-optimizely-event="click.signup_continue.email" data-continue-to="password-container">
                          Continue
                        </button>
                      </div>
                    </div>
                  </div>

                  <div class="py-2 login-div d-none">
                    <label for="" class="label-color">Enter a username*</label>
                    <div class="d-flex align-items-center gap-2 my-2">
                      <div class="d-flex align-items-center gap-2 w-75">
                        <span><i class='bx bx-right-arrow-alt' id="login_change"></i></span>
                        <input id="login" class="py-1 signup-input w-100"  autocomplete="off" aria-describedby="login-err" type="text" name="user[login]" spellcheck="false">
                      </div>
                      <div class="w-25">
                        <button type="button"  id="loginbtn" class="continue-btn next-btn form-control px-3 mt-4 mt-sm-0" data-optimizely-event="click.signup_continue.email" data-continue-to="password-container">
                          Continue
                        </button>
                      </div>
                    </div>
                  </div>

                  <div class="py-2 phone-number-div d-none">
                    <label for="" class="label-color">Enter a phone number*</label>
                    <div class="d-flex align-items-center gap-2 my-2">
                      <div class="d-flex align-items-center gap-2 w-75">
                        <span><i class='bx bx-right-arrow-alt' id="number_change"></i></span> 
                        <div class="d-flex gap-2 w-100"> 
                          <div class="w-50">
                            <select name="" id="" class="py-1 signup-input w-100">
                              <option value="">India</option>
                              <option value="">USA</option>
                            </select>
                          </div>                 
                          <input type="number" class="py-1 signup-input w-100" placeholder="" id="phone_number" name="phone_number"  data-intl-tel-input-id="0" fdprocessedid="5tdapt" autocomplete="off">
                        </div> 
                      </div>
                      <div class="w-25">
                        <button type="button"  id="phone_numberbtn" class="continue-btn form-control px-3 mt-4 mt-sm-0" data-optimizely-event="click.signup_continue.email" data-continue-to="password-container">
                          Continue
                        </button>
                      </div>
                    </div>
                  </div>
                </form>          
              </div>
              <div class="choose-avtar  d-none">
                <span class="back-arrow"><i class='bx bx-arrow-back text-light' ></i></span>
                <div class="text-center">
                  <div class="image-avtar">                    
                    <img class="cropped" src="" alt="">
                  </div>
                  <h5>Choose avtar</h5>
                  <div class="profilepic-deatils d-flex align-items-center justify-content-center gap-1">
                    <button type="button" class="btn " id="avatar-camera" value = "Update profile picture" title="Capture Image" onClick="openCameraModal_user();" data-toggle="tooltip" data-placement="bottom" data-bs-toggle="tooltip" data-bs-placement="bottom" title="" data-original-title="Capture Image">
                      <i class='bx bxs-camera'></i>
                    </button>
                    <button type="button" class="btn " data-bs-toggle="modal" data-bs-target="#user_image_upload" id="avatar-picture" value = "Update profile picture" title="Upload Image"  data-toggle="tooltip" data-placement="bottom" data-bs-toggle="tooltip" data-bs-placement="bottom" title="" data-original-title="Upload Image">
                      <i class='bx bx-image' ></i>
                    </button>
                    <button type="button" class="btn " data-bs-toggle="modal" data-bs-target="#avtar_image_upload" id="avatar-image" value = "Update profile picture" title="Avtar Image"  data-toggle="tooltip" data-placement="bottom" data-bs-toggle="tooltip" data-bs-placement="bottom" title="" data-original-title="Upload Image">
                      <i class='bx bx-user' ></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="term-condtion d-none">
              <small class="d-flex gap-2 p-4 py-2 text-light"><input type="checkbox" name="checkbox" /><span>I agree to <a href="#">SiloClouds Terms</a> and <a href="#">Privacy Policy</a></span></small>
              <div class="text-center">
                <button type="button" class="sign-in-btn px-4 rounded-2 py-2">Sign UP</button>
              </div>
            </div>
            <div class="m-lg-4">
              <p id="email-error" class="error-message acc-text"></p>
              <p id="pass-error" class="error-message acc-text"></p>
              <p id="username-error" class="error-message acc-text"></p>
              <p id="number-error" class="error-message acc-text"></p>
            </div>
          </div>
        </div>



        <div class="modal fade" data-bs-backdrop="static" tabindex="-1" role="dialog" id="cameraModal_user">
          <div class="modal-dialog modal-xl " role="document">
            <div class="modal-content">
              <div class="modal-header border-0 d-flex align-items-center justify-content-between">
                <h5 class="modal-title">Snapshot</h5>
                <div class="dropdown" style="left: 30%;">
                  <span class="dropbtn" onclick="javascript:void(0)"></span>
                  <div class="icon-list">
                    <ul class="option-icon-list">

                      <li class="slide">
                        <a class="slide header" href="#">
                          <span class="nk-menu-icon">
                          </span>
                        </a>
                        <div class="col-12 select outer-box-option">
                          <select class="form-control-plaintext text-white videoSource" id="videoSource" >
                            <option value="default" selected="selected">Select Video Source</option>
                          </select>
                        </div>
                      </li>
                    </ul>
                  </div>    
                </div>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" onclick="Webcam.reset();"></button>
              </div>
              <div class="modal-body pt-5 pt-md-2">

                <div class="row gy-4">
                  <div class="col-md-6">
                    <h6>Camera</h6>
                    <div id="camera_window_user" class="m-auto "></div>
                    <div class="text-center h1 mt-3">
                      <a href="#" onClick="take_snapshot_user()"><i class='bx bxs-camera'></i></a>
                    </div>                      
                  </div>
                  <div class="col-md-6">
                    <h6>Captured Image</h6>
                    <div id="snapshot_user">
                      <img id="captured-image-user" src="">
                    </div>
                  </div>

                  <div class="p-0 modal-footer border-0 mt-0 nk-modal-action justify-end">
                    <ul class="btn-toolbar p-0 snapshot-button g-4 align-center list-unstyled">
                      <li class="mx-2">
                        <!-- <a href="#" onClick="resetCameraSnap_user()" class="sign-in-btn">Cancel</a> -->
                        <button class="btn btn-danger rounded-0 " onClick="resetCameraSnap_user()">Cancel</button>
                      </li>
                      <li class="mx-2">
                        <button class="btn btn-success rounded-0 border-0 disabled" id="saveSnap_user" onClick="saveSnap_user()" >Set</button>
                      </li>
                      <li><button class="btn btn-primary border-0 d-none" onClick="take_snapshot_user()">Take Snapshot</button></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="modal fade" id="user_image_upload" data-bs-backdrop="static" role="dialog">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header border-0">
                <h5 class="modal-title">Upload User Image</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" ></button>
              </div>
              <div class="modal-body modal-body-md">
                <div class="row">
                  <div class="col-md-6">
                    <div class="pictureContainer col-md-8 m-auto">

                      <div class="picture m-auto">
                        
                        <input type="file" id="user_image" accept="image/*" name="user_image" > 
                      </div>
                      <div class="text-center">
                        <p class="py-2">Choose Avatar</p>
                      </div>
                      <!-- temp inline stle -->
                    </div>
                  </div>
                  <div class="col-md-6">
                    <!-- crop user image -->
                    <main class="page">
                      <div class="box">
                      </div>
                      <div class="box-2" style="width: 58%;">
                        <div class="result "></div>
                      </div>
                      <div class="box-2 img-result hide">   
                      </div>
                      <div class="box">
                        <div class="options hide img-w">     
                        </div>    
                      </div>
                    </main>
                  </div>
                </div>
              </div>
              <div class="modal-footer border-0">
                <button type="button" class="btn btn-primary border-0" id="upload2" data-dismiss="modal">Save</button>
              </div>
            </div>
          </div>
        </div>

        <div class="modal fade" id="avtar_image_upload" data-bs-backdrop="static" role="dialog">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header border-0">
                <h5 class="modal-title">Upload User Image</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" ></button>
              </div>
              <div class="modal-body modal-body-md">
                <div class="row row-cols-1 row-cols-md-3 row-cols-md-4">
                  <div class='col text-center'>
                    <input type="radio" name="imgbackground" id="img1" class="d-none imgbgchk" value="images/avtar1.png">
                    <label for="img1">
                      <img src="images/avtar1.png" alt="Image 1">
                      <div class="tick_container">
                        <div class="tick"><i class="fa fa-check"></i></div>
                      </div>
                    </label>
                  </div>
                  <div class='col text-center'>
                    <input type="radio" name="imgbackground" id="img2" class="d-none imgbgchk" value="images/avtar2.png">
                    <label for="img2">
                      <img src="images/avtar2.png" alt="Image 2">
                      <div class="tick_container">
                        <div class="tick"><i class="fa fa-check"></i></div>
                      </div>
                    </label>
                  </div>
                  <div class='col text-center'>
                    <input type="radio" name="imgbackground" id="img3" class="d-none imgbgchk" value="images/avtar3.png">
                    <label for="img3">
                      <img src="images/avtar3.png" alt="Image 3">
                      <div class="tick_container">
                        <div class="tick"><i class="fa fa-check"></i></div>
                      </div>
                    </label>
                  </div>
                  <div class='col text-center'>
                    <input type="radio" name="imgbackground" id="img4" class="d-none imgbgchk" value="images/avtar1.png">
                    <label for="img4">
                      <img src="images/avtar1.png" alt="Image 4">
                      <div class="tick_container">
                        <div class="tick"><i class="fa fa-check"></i></div>
                      </div>
                    </label>
                  </div>
                </div>
              </div>
              <div class="modal-footer border-0">
                <button type="button" class="btn btn-primary border-0" id="avtar-uplaod" data-dismiss="modal">Save</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" ></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/1.1.1/typed.min.js" ></script>
<script>
  $("#typed").typed({
    strings: ["Welcome to Platform! </br>Letâ€™s begin the adventure"],
    typeSpeed: 10,
    startDelay: 0,
    backSpeed: 60,
    backDelay: 500,
    loop: false,
    cursorChar: "",
    contentType: 'html',
    callback: function() {
      $(".email-div").removeClass('d-none');
    }
  });


// email-validation
  $(document).ready(function() {
    // $('#email').blur();
    $('#email').on('keyup', function() {
      validateEmail($(this).val());  
         
    });

    $('#email').on('focus', function() {
      var btnSuccess = $('#ctnbtn');
      btnSuccess.removeClass("d-none").addClass("d-block"); 
      var passSuccess = $('#passbtn');
      passSuccess.removeClass("d-block").addClass("d-none");
       var logSuccess = $('#loginbtn');
      logSuccess.removeClass("d-block").addClass("d-none");
      console.log(validateEmail($(this).val()));
      if(validateEmail($(this).val())){        
        // $("#arrow_change").toggleClass("bx-check bx-right-arrow-alt");       
      }  
    });
  });

  function validateEmail(email)
  {
    var emailRegex = /^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;;
    var emailInput = $('#email');
    var emailError = $('#email-error');
    var btnSuccess = $('#ctnbtn');
    $('#pass-error').html('');

    if (email == '') {
      emailInput.addClass('error');
      emailError.text('Please enter email');
      btnSuccess.removeClass("ctnsuccess");
      $("#arrow_change").addClass("bx-right-arrow-alt").removeClass("bx-x bx-check"); 
      return false;  
    } else if (emailRegex.test(email)) {
      emailInput.removeClass('error');
      emailError.text('');
      btnSuccess.addClass("ctnsuccess");
      $("#arrow_change").addClass("bx-check").removeClass("bx-x bx-right-arrow-alt");             
      return true; 

    } else {
      emailInput.addClass('error');
      emailError.text('Email is invalid or already taken');
      btnSuccess.removeClass("ctnsuccess");
      $("#arrow_change").removeClass("bx-check").addClass("bx-x");
      return false;  

    }
    return true;
  };


// password-validation
  $(document).ready(function() {
    $('#password').on('focus', function() {
     $('#passbtn').removeClass("d-none").addClass("d-block");
     $('#ctnbtn').removeClass("d-block").addClass("d-none");
      var logSuccess = $('#loginbtn');
      logSuccess.removeClass("d-block").addClass("d-none");
      if( $("#arrow_change").hasClass('bx-right-arrow-alt')){
        $("#arrow_change").toggleClass("bx-check bx-right-arrow-alt");
      }
      // $("#pass_change").toggleClass("bx-check bx-right-arrow-alt");
    });

    $('#password').on('keyup', function() {
      var pswd = $(this).val();
      var passError = $('#pass-error');
      var passSuccess = $("#passbtn");
      var passChange = $("#pass_change");

      if (pswd.length < 8) {
        passError.text('Make sure it is at least 15 characters OR at least 8 characters including a number and a lowercase letter');
        passSuccess.removeClass("ctnsuccess").attr("disabled", "disabled");
        passChange.removeClass("bx-check").addClass("bx-x");
      } else if (!pswd.match(/[A-z]/)) {
        passError.text('At least one letter');
        passSuccess.removeClass("ctnsuccess");
        passChange.removeClass("bx-check").addClass("bx-x");
      } else if (!pswd.match(/[A-Z]/)) {
        passError.text('At least one Capital letter');
        passSuccess.removeClass("ctnsuccess");
        passChange.removeClass("bx-check").addClass("bx-x");
      } else if (!pswd.match(/\d/)) {
        passError.text('At least one number');
        passSuccess.removeClass("ctnsuccess");
        passChange.removeClass("bx-check").addClass("bx-x");
      } else if (!pswd.match(/\W|_/g)) {
        passError.text('At least one special character');
        passSuccess.removeClass("ctnsuccess");
        passChange.removeClass("bx-check").addClass("bx-x");
      } else {
        passError.text('');
        passSuccess.addClass("ctnsuccess").attr("disabled", false);
        passChange.removeClass("bx-x bx-right-arrow-alt").addClass("bx-check");
      }
    });
  });
  // username-validation
  $(document).ready(function() {
    $('#login').blur();
    $('#login').on('keyup', function() {
      validateLogIn($(this).val());        
    });
  });


   $('#login').on('focus', function() {
    $('#loginbtn').removeClass("d-none").addClass("d-block");
    $('#ctnbtn').removeClass("d-block").addClass("d-none");
    var passSuccess = $('#passbtn');
    passSuccess.removeClass("d-block").addClass("d-none");
    if( $("#arrow_change").hasClass('bx-right-arrow-alt')){
      $("#arrow_change").toggleClass("bx-check bx-right-arrow-alt");
    }
  });



 
   $('#login').on('keyup', function() {
    var loginInput = $(this);
    var textSuccess = $('#loginbtn');
    var user_name = $('#username-error');
    input  = loginInput.val();
    charRegex =/^[A-Za-z_]*$/;
    if ($("#login").val() == "") {
      user_name.text('Please enter at least 6 characters without any symbols except _');
      textSuccess.removeClass("ctnsuccess");
      $("#login_change").removeClass("bx-right-arrow-alt bx-check").addClass("bx-x");      
    } else if (/[^a-zA-Z0-9_]/.test(loginInput.val())) {
      user_name.text('Please don\'t use symbols except _');
      textSuccess.removeClass("ctnsuccess");
      $("#login_change").removeClass("bx-right-arrow-alt bx-check").addClass("bx-x");
    } else if (loginInput.val().length >= 6) {
      textSuccess.prop("disabled", false);
      textSuccess.addClass("ctnsuccess");
      $("#login_change").removeClass("bx-right-arrow-alt bx-x").addClass("bx-check");      
      user_name.text('');
    } else {
      textSuccess.prop("disabled", true);        
      $("#login_change").removeClass("bx-check bx-right-arrow-alt").addClass("bx-x");
      user_name.text('Please enter at least 6 characters without any symbols except _');
      textSuccess.removeClass("ctnsuccess");
    }
  });

// phone-number-validation
$(document).ready(function() {

  $('#phone_number').on('focus', function() {
    $('#loginbtn').removeClass("d-block").addClass("d-none");
    $('#ctnbtn').removeClass("d-block").addClass("d-none");
     $('#passbtn').removeClass("d-block").addClass("d-none");    
  });

  $('#phone_number').on('keyup', function() {
    var phoneNumber = $("#phone_number").val();
    var phoneNumber_btn = $("#phone_numberbtn");
    var cleanedPhoneNumber = phoneNumber.replace(/\D/g, '');

    $("#phone_number").val(cleanedPhoneNumber);

    if (cleanedPhoneNumber.length === 10) {
      phoneNumber_btn.prop("disabled", false);
      phoneNumber_btn.addClass("ctnsuccess");
      $("#number_change").removeClass("bx-right-arrow-alt").addClass("bx-check");
      $("#number-error").text('');      
    } 
    else if (cleanedPhoneNumber.length >= 10){
      $("#number-error").text('Enter correct number');
      phoneNumber_btn.removeClass("ctnsuccess");
      $("#number_change").removeClass("bx-check").addClass("bx-right-arrow-alt");            
    } 

    else {
      phoneNumber_btn.prop("disabled", true);
      phoneNumber_btn.removeClass("ctnsuccess");
      $("#number_change").removeClass("bx-check").addClass("bx-right-arrow-alt");
    }
  });
});


</script>
<script>
  $("#ctnbtn").on("click", function(){
    if($("#email").val() != ""){
     var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
     var emailInput = $('#email');
     var emailError = $('#email-error');
     var btnSuccess = $('#ctnbtn');
     email = $("#email").val();
     if (validateEmail(email)) {
    // $("#arrow_change").toggleClass("bx-right-arrow-alt bx-check");
      $(this).addClass("d-none")
      $(".pass-div").removeClass('d-none');   
    }
    
  } else{
    var emailError = $('#email-error');
    emailError.text('Please enter email');
  }  
  $("#password").focus();   
  });


  $('.toggle-password').click(function() {
    var input = $(this).prev("input");
    if (input.attr("type") === "password") {
      input.attr("type", "text");
    } else {
      input.attr("type", "password");
    }
    $(".toggle-password").toggleClass("bx-show bx-low-vision")
  });




  $("#passbtn").on("click", function(){
    if($("#password").val() != ""){
      $(this).addClass("d-none")
      $(".login-div").removeClass('d-none').addClass("d-block");
    }    
    else{
      var passError = $('#pass-error');
      passError.text('Please enter password');
    }  
    $("#login").focus(); 
  });

  $("#loginbtn").on("click", function(){
    if($("#login").val() != ""){
      $(this).addClass("d-none")
      $(".phone-number-div").removeClass('d-none').addClass("d-block");
    } 
    else{
      var passError = $('#pass-error');
      passError.text('Please enter password');
    }  
    $("#phone_number").focus();  
  });

  $(document).ready(function() {
    $('input').keypress(function(e) {
      if (e.which == 13) {
          e.preventDefault(); // Prevent default Enter key behavior

          var $nextButton = $(this).closest('.d-flex').next().find('button'); // Find the next button element

          if ($nextButton.length) {
            $nextButton.focus(); // Set focus on the next button element
          }
        }
      });
    $("#phone_numberbtn").on("click", function(){
      $(".term-condtion").addClass("d-block").removeClass("d-none");
    });
  });

  // next-btn
  $(document).ready(function() {
    var sign_up = $(".sign-in-btn");
    var back_arrow = $(".back-arrow");
    sign_up.on("click", function(){
      $(".sign-text-form").addClass("d-none");
      $(".choose-avtar").addClass("d-block").removeClass("d-none");
      if($(".choose-avtar").hasClass('d-block')){        
        $(".sign-box").addClass("sign-avtar-box");
      }
    });
     back_arrow.on("click", function(){
      $(".choose-avtar").addClass("d-none");
      $(".sign-text-form").addClass("d-block").removeClass("d-none");
    });
  });


  // choose avtar
  function openCameraModal_user() {
    $("#cameraModal_user").modal("show");
    Webcam.reset();
    Webcam.attach("#camera_window_user");
  }

  function take_snapshot_user() {
    Webcam.snap(function (data_uri) {
      $("#captured-image-user").attr('src',data_uri);
    });
    $("#saveSnap_user").removeClass("disabled");
  }

  function saveSnap_user() {
    var base64image = document.getElementById("captured-image-user").src;
    $(".cropped").attr('src',base64image);
    $('#cameraModal_user').modal('hide');
    Webcam.reset();
  }

  function resetCameraSnap_user() {
    $("#camera_window_user").html("");
    $("#captured-image-user").attr('src','');
    $("#cameraModal_user").modal("hide");
    filesData = new FormData();
    filesCount = 0;
    chat_images = [];
  }
  function readURL(input, image_id) {
  if (input.files && input.files[0]) {
    var reader = new FileReader();
    reader.onload = function (e) {
      $('#' + image_id)
      .attr('src', e.target.result)
    };
    reader.readAsDataURL(input.files[0]);
  }
}

  let result = document.querySelector('.result'),
  img_result = document.querySelector('.picture'),
  img_w = document.querySelector('.img-w'),
  img_h = document.querySelector('.img-h'),
  options = document.querySelector('.options'),
  save = document.querySelector('#upload2'),
  cropped = document.querySelector('.cropped'),
  upload = document.querySelector('#user_image'),
  cropper = '';
  if (upload) {    
    upload.addEventListener('change', (e) => {
      if (e.target.files.length) {
        const reader = new FileReader();
        reader.onload = (e)=> {
          if(e.target.result){
            let img = document.createElement('img');
            img.id = 'image';
            img.src = e.target.result
            result.innerHTML = '';
            result.appendChild(img);
            save.classList.remove('hide');
            options.classList.remove('hide');
            cropper = new Cropper(img, {
              aspectRatio: 1 / 1,
              viewMode: 1,
              modal:true,
              responsive:true,
              minContainerWidth:230,
              minContainerHeight:230,
            });
          }
        };
        reader.readAsDataURL(e.target.files[0]);

      }
    });
  }
  var $image=$('#user_image');

  if (save) {
    save.addEventListener('click',(e)=>{
      e.preventDefault();
      let imgSrc = cropper.getCroppedCanvas({
        width: img_w.value 
      }).toDataURL();
      cropped.classList.remove('hide');
      img_result.classList.remove('hide');
      cropped.src = imgSrc;
      $('#user_image_upload').modal('hide');
    });
  };

  $("#avtar-uplaod").on("click", function() {

    var avtar_image = $('[name="imgbackground"]:checked').val();
    $(".cropped").attr("src", avtar_image);
    $("#avtar_image_upload").modal("hide")
  });


</script>

<script  src="js/webcam.min.js"></script>
  <script language="JavaScript">
    Webcam.set({
      width: 450,
      height: 340,
      image_format: 'jpeg',
      jpeg_quality: 90
    });
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.7/cropper.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.7/cropper.css"></link>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.7/cropper.js"></script>  
</body>
</html>